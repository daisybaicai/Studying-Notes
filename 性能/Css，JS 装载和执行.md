## Css，JS 装载和执行
**1.网站在浏览器中如何渲染**
（1）首先做 DNS 查询，如果这一步做了智能 DNS 解析的话，会提供访问速度最快的 IP 地址回来
（2）接下来是 TCP 握手，应用层会下发数据给传输层，这里 TCP 协议会指明两端的端口号，然后下发给网络层。网络层中的 IP 协议会确定 IP 地址，并且指示了数据传输中如何跳转路由器。然后包会再被封装到数据链路层的数据帧结构中，最后就是物理层面的传输了
（3）TCP 握手结束后会进行 TLS 握手，然后就开始正式的传输数据
（4）数据在进入服务端之前，可能还会先经过负责负载均衡的服务器，它的作用就是将请求合理的分发到多台服务器上，这时假设服务端会响应一个 HTML 文件
（5）首先浏览器会判断状态码是什么，如果是 200 那就继续解析，如果 400 或 500 的话就会报错，如果 300 的话会进行重定向，这里会有个重定向计数器，避免过多次的重定向，超过次数也会报错
（6）浏览器开始解析文件，如果是 gzip 格式的话会先解压一下，然后通过文件的编码格式知道该如何去解码文件
（7）文件解码成功后会正式开始渲染流程，先会根据 HTML 构建 DOM 树，有 CSS 的话会去构建 CSSOM 树。如果遇到 script 标签的话，会判断是否存在 async 或者 defer ，前者会并行进行下载并执行 JS，后者会先下载文件，然后等待 HTML 解析完成后顺序执行，如果以上都没有，就会阻塞住渲染流程直到 JS 执行完毕。遇到文件下载的会去下载文件，这里如果使用 HTTP 2.0 协议的话会极大的提高多图的下载效率。
（8）初始的 HTML 被完全加载和解析后会触发 DOMContentLoaded 事件
（9）CSSOM 树和 DOM 树构建完成后会开始生成 Render 树，这一步就是确定页面元素的布局、样式等等诸多方面的东西
（10）在生成 Render 树的过程中，浏览器就开始调用 GPU 绘制，合成图层，将内容显示在屏幕上了

**2.HTML一些渲染的特点**
（1）**顺序渲染，并发加载**
	外部的资源并发加载，但是并发度会收到域名限制，如果把一些资源托管在CDN上，建议托管在3-4个CDN域名上。
（2）**是否阻塞**
	CSS会阻塞JS加载，会阻塞后续页面渲染。
	JS加载会阻塞后续JS执行
（3）**依赖关系**
	页面出现以后，出现闪烁一下，CSS又重新加载，CSSheader带有样式
	JS的依赖关系，async,defer
（4）**引入方式**
	是否动态引入JS资源 单页页面资源加载

**1.顺序执行，并发加载**
（1）词法分析：HTML文档解析的方式 从上倒下的顺序
（2）并发加载：有些资源是并发请求的
（3）并发上限：每一个域名下并发数量是有上线的
**2.Css阻塞**
（1）css,head 中阻塞页面的渲染
        header中link会阻塞页面渲染 要等他加载完
（2）css阻塞js的执行
        因为JS可能会操作DOM
（3）css不阻外部脚本的加载
**3.js阻塞** 
  （1）直接引入的js阻塞页面的渲染
  （2）js不阻塞资源的加载
    通过defer,async来用
  （3）js顺序执行，阻塞后续js逻辑的执行
    js执行单线程